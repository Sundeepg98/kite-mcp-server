{{define "docs_base"}}
<!DOCTYPE html>
<html lang="en" :data-theme="theme" x-data="docsApp()" x-cloak>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{.Title}} – Kite MCP Docs</title>
    <meta name="description" content="{{.Description}}">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500&family=Literata:opsz,wght@7..72,400;7..72,600;7..72,700&family=Source+Sans+3:wght@400;500;600&display=swap" rel="stylesheet">

    <!-- Styles -->
    <link rel="stylesheet" href="/static/css/docs.css">

    <!-- highlight.js for code -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">

    <!-- Alpine.js -->
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>

    <script>
        // Theme initialization (before Alpine loads)
        if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.setAttribute('data-theme', 'dark');
        }
    </script>
</head>
<body>
    <div class="docs-layout">
        <!-- Header -->
        <header class="docs-header">
            <a href="/" class="docs-logo">
                <img src="/static/img/zerodha-logo.svg" alt="Zerodha" height="24">
                <span>Kite MCP</span>
            </a>

            <div class="docs-header-actions">
                <a href="https://github.com/zerodha/kite-mcp-server" class="btn btn-secondary" target="_blank" rel="noopener">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
                    GitHub
                </a>

                <button
                    class="theme-toggle"
                    @click="toggleTheme()"
                    :title="theme === 'dark' ? 'Switch to light mode' : 'Switch to dark mode'"
                >
                    <svg x-show="theme !== 'dark'" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>
                    <svg x-show="theme === 'dark'" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
                </button>

                <button
                    class="theme-toggle mobile-menu-toggle"
                    @click="sidebarOpen = !sidebarOpen"
                    :aria-expanded="sidebarOpen"
                >
                    <svg x-show="!sidebarOpen" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg>
                    <svg x-show="sidebarOpen" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
                </button>
            </div>
        </header>

        <!-- Sidebar -->
        <aside class="docs-sidebar" :class="{ 'open': sidebarOpen }" @click.outside="sidebarOpen = false">
            <nav>
                <div class="nav-section">
                    <div class="nav-section-title">Getting Started</div>
                    <ul class="nav-list">
                        <li class="nav-item">
                            <a href="/docs/" class="nav-link {{if eq .CurrentPath "/docs/"}}active{{end}}">Introduction</a>
                        </li>
                        <li class="nav-item">
                            <a href="/docs/getting-started" class="nav-link {{if eq .CurrentPath "/docs/getting-started"}}active{{end}}">Quick Start</a>
                        </li>
                        <li class="nav-item">
                            <a href="/docs/oauth-flow" class="nav-link {{if eq .CurrentPath "/docs/oauth-flow"}}active{{end}}">OAuth Flow</a>
                        </li>
                    </ul>
                </div>

                <div class="nav-section">
                    <div class="nav-section-title">MCP Clients</div>
                    <ul class="nav-list">
                        <li class="nav-item">
                            <a href="/docs/clients/claude-desktop" class="nav-link {{if eq .CurrentPath "/docs/clients/claude-desktop"}}active{{end}}">Claude Desktop</a>
                        </li>
                        <li class="nav-item">
                            <a href="/docs/clients/cursor" class="nav-link {{if eq .CurrentPath "/docs/clients/cursor"}}active{{end}}">Cursor</a>
                        </li>
                        <li class="nav-item">
                            <a href="/docs/clients/vscode" class="nav-link {{if eq .CurrentPath "/docs/clients/vscode"}}active{{end}}">VS Code</a>
                        </li>
                    </ul>
                </div>

                <div class="nav-section">
                    <div class="nav-section-title">Reference</div>
                    <ul class="nav-list">
                        <li class="nav-item">
                            <a href="/docs/tools" class="nav-link {{if eq .CurrentPath "/docs/tools"}}active{{end}}">Tools Reference</a>
                        </li>
                        <li class="nav-item">
                            <a href="/docs/examples" class="nav-link {{if eq .CurrentPath "/docs/examples"}}active{{end}}">Examples</a>
                        </li>
                    </ul>
                </div>

                <div class="nav-section">
                    <div class="nav-section-title">Resources</div>
                    <ul class="nav-list">
                        <li class="nav-item">
                            <a href="/docs/faq" class="nav-link {{if eq .CurrentPath "/docs/faq"}}active{{end}}">FAQ</a>
                        </li>
                        <li class="nav-item">
                            <a href="https://kite.trade/docs/connect/v3/" class="nav-link" target="_blank" rel="noopener">Kite Connect API ↗</a>
                        </li>
                    </ul>
                </div>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="docs-main">
            <article class="docs-content">
                {{template "content" .}}
            </article>

            <footer class="docs-footer">
                <p>&copy; Zerodha · Kite MCP Server {{.Version}}</p>
            </footer>
        </main>
    </div>

    <!-- highlight.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/go.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/json.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/bash.min.js"></script>

    <script>
        function docsApp() {
            return {
                theme: localStorage.theme || (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light'),
                sidebarOpen: false,

                init() {
                    // Apply theme
                    document.documentElement.setAttribute('data-theme', this.theme);

                    // Initialize highlight.js
                    hljs.highlightAll();

                    // Add copy buttons to code blocks
                    document.querySelectorAll('pre code').forEach((block) => {
                        const pre = block.parentElement;
                        const wrapper = document.createElement('div');
                        wrapper.className = 'code-block';
                        wrapper.style.position = 'relative';
                        pre.parentNode.insertBefore(wrapper, pre);
                        wrapper.appendChild(pre);

                        const btn = document.createElement('button');
                        btn.className = 'copy-btn';
                        btn.style.position = 'absolute';
                        btn.style.top = '8px';
                        btn.style.right = '8px';
                        btn.innerHTML = 'Copy';
                        btn.onclick = () => {
                            navigator.clipboard.writeText(block.textContent);
                            btn.innerHTML = 'Copied!';
                            btn.classList.add('copied');
                            setTimeout(() => {
                                btn.innerHTML = 'Copy';
                                btn.classList.remove('copied');
                            }, 2000);
                        };
                        wrapper.appendChild(btn);
                    });
                },

                toggleTheme() {
                    this.theme = this.theme === 'dark' ? 'light' : 'dark';
                    localStorage.theme = this.theme;
                    document.documentElement.setAttribute('data-theme', this.theme);
                }
            }
        }
    </script>
</body>
</html>
{{end}}
